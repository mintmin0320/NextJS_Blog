---
title: 'React.lazy와 suspense 정리 및 적용'
date: '2023-09-05'
tags: ['TIL']
draft: false
summary: 'React.lazy를 프로젝트에 적용해보자!'
---

## React.lazy
- React 애플리케이션은 일반적으로 많은 구성 요소, 유틸리티 메서드 및 라이브러리로 구성된다. 
- SPA 구조인 React의 특성상 처음 JS 파일을 불러올 때 당장 사용하지 않을 컴포넌트까지 모두 불러오는 단점이 있다. CRA 방식의 단점으로도 꼽히는 이유와도 동일한데, 규모가 커질수록 JS 번들 파일의 크기가 커지고 다운로드 속도가 느려지면 사용자 입장에서는 흰색 화면을 계속 보게 된다. 이는 사용자 편의성에 큰 불편함을 주게 되는 치명적인 문제를 야기한다.

> 💡 React.lazy를 사용하면 동적 import가 가능하기 때문에 이를 사용하면 초기 렌더링 지연시간을 어느 정도 줄일 수 있게 된다.

<br/>

## 📌 현재 진행 하고 있는 개인 프로젝트에 적용하여 성능 차이를 알아보자
![](https://velog.velcdn.com/images/mintmin0320/post/521b698f-c690-4de9-a9a0-acacf877d365/image.png)

📍 초기 bundle.js 파일의 크기는 303 byte이다.

📍 이미지가 많은 상품 페이지에 동적 import lazy를 사용하는 코드를 작성해보자.

### 기존 코드
![](https://velog.velcdn.com/images/mintmin0320/post/1664142c-5104-4ad5-999d-5f5ab5644cb7/image.png)

### lazy 적용 코드
![](https://velog.velcdn.com/images/mintmin0320/post/b6bc348d-33c1-4519-9c08-4c1254928097/image.png)

<br/>

🟢 상품 페이지에 lazy를 적용 결과
![](https://velog.velcdn.com/images/mintmin0320/post/e6e254c2-a580-426c-b94b-113638dd9811/image.png)
- bundle.js의 크기가 303 -> 302로 감소했고 시간 또한 단축된 결과를 확인할 수 있다!

<br/>

# suspense

```
 <Suspense fallback={<div>Loading...</div>}>
```

- 데이터를 가져오는 비동기 작업에 유용하다. 코드를 보면 눈치챌 수 있듯이 비동기 작업이 완료될 때까지 백업 UI를 표시할 수 있다.
- fallback은 대기 상태일 때 보여줄 컴포넌트나 요소를 지정한다.

<br/>

# 마치며
React의 suspense와 lazy를 사용하면 강력한 앱의 성능 최적화가 가능하므로 적재적소에 활용할 필요성이 있다.
멋진 디자인과 기능들은 만드는 것도 중요하지만 페이지 성능 또한 프론트엔드 개발자가 고려해야 할 중요한 요소라는 사실을 다시금 깨달았다. 평소에 다른 사이트를 이용할 때 흰색 페이지가 오래 보이면
답답한 마음에 화면을 그냥 닫아버렸던 기억이 있다. SSR을 사용하면 이러한 문제를 해결할 수 있겠지만 지금은 CSR 방식으로 개발하고 있으므로! 주어진 환경에서 최적화할 필요가 있다고 생각한다.
앞으로도 이미지와 폰트를 최적화하는 강의를 보며 사용자들의 편하게 사용할 수 있도록 진행해갈 예정이다~! 🔥