---
title: 'ê¸°ì¡´ ë¡œê·¸ì¸/íšŒì›ê°€ì… ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í† ë§ ì§„í–‰ - react-hook-form'
date: '2023-10-30'
tags: ['COMMA']
draft: false
summary: 'React Hook Form ì ìš©í•˜ê¸°'
---

ê¸°ì¡´ COMMA í”„ë¡œì íŠ¸ - Login ì»´í¬ë„ŒíŠ¸ì˜ ê²½ìš° ì½”ë“œê°€ 401 ì¤„ë¡œ ìœ ì§€/ë³´ìˆ˜/ê°€ë…ì„± ì¸¡ë©´ì—ì„œ ìµœì•…ì˜ ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤ê³  ìƒê°í•œë‹¤. ì‹¤ì œë¡œ styled-componentsì™€ í•¨ìˆ˜ ì½”ë“œë“¤ì´ í•©ì³ì ¸ ìˆ˜ì • ì†Œìš”ê°€ ë°œìƒí–ˆì„ ë•Œ ê³ ìƒí–ˆë˜ ê¸°ì–µì´ ìˆë‹¤.

## ê°œì„  ëª©í‘œ
1. API ìš”ì²­ í•¨ìˆ˜ ë¶„ë¦¬
- ë¡œê·¸ì¸ ìš”ì²­ í•¨ìˆ˜ë¥¼ ë”°ë¡œ hookìœ¼ë¡œ ë¶„ë¦¬
- useMutationì„ ì ìš©í•´ Login ì»´í¬ë„ŒíŠ¸ì— ì£¼ì…

```
// page > LoginPage

export default function LoginPage() {
  const signIn = useSignIn();

  return (
    <Container>
      <Logo />
      <LoginForm
        signIn={signIn}
      />
    </Container>
  );
};
```
LoginForm ì»´í¬ë„ŒíŠ¸ì— signIn hookì„ ì£¼ì…í•´ LoginFormì— signIn hookì„ ì˜ì¡´ì„± ì£¼ì…í•´ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê²Œ í–ˆë‹¤.

<br/>

2. styled-comments ì½”ë“œ ë¶„ë¦¬
- ê¸°ì¡´ styled-comments ì½”ë“œê°€ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ê°€ë…ì„±ì„ í•´ì¹œë‹¤ê³  ìƒê°í–ˆê³  ë”°ë¡œ style íŒŒì¼ì„ ë§Œë“¤ì–´ ë¶„ë¦¬ ì‘ì—…ì„ ì§„í–‰í–ˆë‹¤.

<br/>

3. react-hook-form ì ìš©
> ğŸ’¡ ì ìš©ì„ ê³ ë¯¼í•œ ì´ìœ 
- ğŸ–ï¸ ë°ì´í„° ìœ íš¨ì„± ê²€ì¦ì„ ì§€ì› ë° ê°€ë…ì„±ì˜ ì´ì  <br/>
ê¸°ì¡´ì—ëŠ” state ê°’ì„ ê²€ì¦í•˜ê¸° ìœ„í•´ switch ë¬¸ì„ ì‚¬ìš©í•´ ë°ì´í„° íƒ€ì…ì„ ê²€ì¦í–ˆê³  ì§€ê¸ˆ ìƒê°í•´ ë´ë„ ë§¤ìš° ë¹„íš¨ìœ¨ì ì¸ ì½”ë“œ ë¡œì§ê³¼ ë°©ë²•ì´ë¼ê³  ìƒê°í•œë‹¤.

```
// ì…ë ¥ê°’ì´ ë³€í•  ë•Œ
const _handleInputChange = (e) => {
  switch (e.target.name) {
    case 'userId':
      if (regEng.test(e.target.value)) {
        setState({
          ...state,
          idValidation: '',
          validation: true,
          [e.target.name]: e.target.value
        });
      } else {
        console.log("íŠ¹ìˆ˜ë¬¸ìë¥¼ ì œì™¸í•œ ì•„ì´ë””ë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        setState({
          ...state,
          validation: false,
          idValidation: '5~15ìì˜ ì˜ë¬¸ê³¼ ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.',
          [e.target.name]: e.target.value
        });
      } break;
    case 'userPw':
      if (regPw.test(e.target.value)) {
        console.log("ì˜¬ë°”ë¥¸ ë¹„ë°€ë²ˆí˜¸ í˜•ì‹ì…ë‹ˆë‹¤.");
        setState({
          ...state,
          validationPw: true,
          pwValidation: '',
          [e.target.name]: e.target.value
        });
      } else {
        console.log("ë¹„ë°€ë²ˆí˜¸ë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        setState({
          ...state,
          validationPw: false,
          pwValidation: 'ì˜ëª»ëœ í˜•ì‹ì…ë‹ˆë‹¤.',
          [e.target.name]: e.target.value
        });
      } break;
    default:
  }
};
```

### react-hook-formì„ ì ìš©í•œ ì½”ë“œ

```
<S.LoginContainer>
  <S.Wrap>
    <S.Form onSubmit={onSubmit}>
      <S.InputBox style={{ borderBottom: 'none' }}>
        <S.IconBox>
          <HiUser size='22px' />
        </S.IconBox>
        <S.Input
          type='text'
          placeholder='ID'
          {...register('accountId', {
            required: 'Required',
            pattern: {
              value: /^[a-zA-Z0-9]+$/,
              message: 'ì˜ë¬¸ê³¼ ìˆ«ì ì¡°í•©ë§Œ ì‚¬ìš©í•´ ì£¼ì„¸ìš”.'
            }
          })}
        />
        </S.InputBox>
 ... ê¸°íƒ€ ì½”ë“œ
```

ê°€ë…ì„±ë„ ë–¨ì–´ì§€ê³  react-hook-form ìì²´ì—ì„œ ê¸°ëŠ¥ì„ ì§€ì›í•˜ë¯€ë¡œ ì£¼ì €ì—†ì´ ì„ íƒí•˜ê²Œ ë˜ì—ˆë‹¤.

<br/>

- ğŸ–ï¸ ì„±ëŠ¥ <br/>
hook-formì„ ì ìš©í•  ê²½ìš° ë¦¬ë Œë”ë§ì´ ì²˜ìŒì—ë§Œ ë°œìƒí•˜ê³  watch ì˜µì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ê·¸ ë’¤ë¡œëŠ” ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ê´€ë ¨ ì•„í‹°í´ì„ ì½ê³  ì§ì ‘ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ ë´¤ë‹¤.


<br/>

## React Dev Toolsì—ì„œ Highlight updates when components renderë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰

<br/>

### hook-form ì ìš©

![á„’á…ªá„†á…§á†«-á„€á…µá„…á…©á†¨-2023-10-27-á„‹á…©á„’á…®-11 13 39](https://github.com/mintmin0320/COMMA_REFACTORING/assets/114549939/52ee48df-0c56-45b3-9265-cdd8804f46a8)

### hook-form ë¯¸ì ìš©
 
![á„’á…ªá„†á…§á†«-á„€á…µá„…á…©á†¨-2023-10-27-á„‹á…©á„’á…®-10 44 32](https://github.com/mintmin0320/COMMA_REFACTORING/assets/114549939/d1299888-31cf-4ab4-bc6b-1b86706e6149)


<br/>

> ğŸ“Œ íŠ¹ì´ì‚¬í•­

ë¹„ìŠ·í•œ ë¡œì§ìœ¼ë¡œ íšŒì›ê°€ì… ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•˜ë˜ ì¤‘ ì´ë©”ì¼ ì¸ì¦ ìš”ì²­, ì¸ì¦ ì½”ë“œ í™•ì¸ ì‘ì—…ì— email, code ê°’ì´ í•„ìš”í–ˆê³  onSubmit ì´ë²¤íŠ¸ê°€ ë°œë™í•´ì•¼ì§€ë§Œ ìœ íš¨ì„± ê²€ì¦ì´ ê°€ëŠ¥í–ˆê¸° ë•Œë¬¸ì— ê°’ ë³€ê²½ í™•ì¸ì„ ìœ„í•´ watch ì˜µì…˜ì„ ì‚¬ìš©í–ˆê³  trigger ì˜µì…˜ì„ ì ìš©í•´ ìœ íš¨í•˜ì§€ ì•Šì€ í˜•ì‹ì¼ ê²½ìš° ë©”ì‹œì§€ì™€ í•¨ê»˜ ìš”ì²­ì´ ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤.

```
const email = watch('email');
const code = watch('code');

// ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ìš”ì²­
const handleAuthCode = async () => {
  if (!await trigger('email')) {
    toast.warning('ìœ íš¨í•˜ì§€ ì•Šì€ í˜•ì‹');

    return;
  }

  try {
    const data = await reqAuthCode.mutateAsync(email);

    if (data === 200) {
      setIsRequestAuthCode(true);
    }
  } catch (error) {
    console.log(error);
  }
};
```

### ìœ íš¨ì„± ê²€ì¦ ì ìš© í™”ë©´
![](https://velog.velcdn.com/images/mintmin0320/post/edf26259-e1bb-4c0c-af08-e8637555842f/image.png)

<br/>

ë¡œê·¸ì¸ í˜ì´ì§€ ì‘ì—…ì„ ì§„í–‰í•˜ë˜ ì¤‘  react-hook-form, formik, rc-field-form ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹„êµ ì•„í‹°í´ì„ ë³´ê²Œ ë˜ì—ˆê³  í‰ì†Œ react-hook-formì„ ë“¤ì–´ë³¸ ê²½í—˜ì´ ìˆì–´ ê³§ë°”ë¡œ í”„ë¡œì íŠ¸ì— ì ìš©í•´ ë³´ê²Œ ë˜ì—ˆë‹¤. ê¸°ì¡´ë³´ë‹¤ ì½”ë“œë„ ê°„ê²°í•´ ì§€ê³  ì…ë ¥ëœ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ ê¸°ëŠ¥ë„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥, ê°€ë…ì„± ë©´ì—ì„œ í° ì´ì ì´ ìˆë‹¤ê³  ìƒê°í•´ ì ìš©í•˜ê²Œ ë˜ì—ˆë‹¤. 

ì—¬ëŸ¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¡´ì¬í•˜ê³  ë‚´ê°€ í•„ìš”í•œ ê¸°ëŠ¥ì€ ì›¬ë§Œí•˜ë©´ ì´ë¯¸ ì¡´ì¬í•œë‹¤ê³  ìƒê°í•œë‹¤. ë”°ë¼ì„œ ë‚´ í”„ë¡œì íŠ¸ë‚˜ í•™ìŠµì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì í•©í•œì§€ íŒë‹¨í•˜ê³  ì ì¬ì ì†Œì— ë°°ì¹˜í•˜ê¸° ìœ„í•´ ë§ì´ ì°¾ì•„ë³´ê³  ì ìš©í•´ë³´ëŠ” ê²½í—˜ì´ í•„ìš”í•˜ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.
